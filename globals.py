# globals.py (рж╕ржВрж╢рзЛржзрж┐ржд)

import os
import tempfile
from pathlib import Path
import threading

# ЁЯМЯ ржЗржи-ржорзЗржорж░рж┐ рж╕рзНржЯрзЛрж░рзЗржЬ ржбрж┐ржХрж╢ржирж╛рж░рж┐ (ржлрж╛ржЗрж▓ ржбрзЗржЯрж╛ ржПржмржВ ржорзЗржЯрж╛ржбрзЗржЯрж╛ рж░рж╛ржЦрж╛рж░ ржЬржирзНржп) ЁЯМЯ
# ржПржЯрж┐ ржПржХржЯрж┐ рж╕рж╛ржзрж╛рж░ржг Python ржбрж┐ржХрж╢ржирж╛рж░рж┐ред
FILE_STORAGE_DICT = {}

# ЁЯМЯ рж▓ржХ рждрзИрж░рж┐ ржХрж░рж╛ рж╣рж▓рзЛ ржерзНрж░рзЗржб-рж╕рзЗржлржЯрж┐рж░ ржЬржирзНржп (ржПржХрж╛ржзрж┐ржХ рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ ржПржХржЗ рж╕ржоржпрж╝рзЗ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржХрж░рждрзЗ ржкрж╛рж░рзЗ) ЁЯМЯ
FILE_STORAGE_LOCK = threading.Lock()

# ЁЯЪА ржЕржи-ржбрж┐рж╕рзНржХ ржЯрзЗржорзНржкрзЛрж░рж╛рж░рж┐ ржлрж╛ржЗрж▓ рж╕рзНржЯрзЛрж░рзЗржЬ ржкрж╛ржерзЗрж░ ржЬржирзНржп (ржпржжрж┐ ржнржмрж┐рж╖рзНржпрждрзЗ рж▓рж╛ржЧрзЗ) ЁЯЪА
# ржХрзНрж▓рж╛ржЙржб ржПржиржнрж╛ржпрж╝рж░ржиржорзЗржирзНржЯрзЗ (Render) /tmp ржлрзЛрж▓рзНржбрж╛рж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рж▓рзЛ
TEMP_ROOT_DIR = Path(tempfile.gettempdir())

# ржЯрзЗржорзНржкрзЛрж░рж╛рж░рж┐ ржЖржкрж▓рзЛржб ржбрж┐рж░рзЗржХрзНржЯрж░рж┐
# ржмрж░рзНрждржорж╛ржирзЗ ржЖржорж░рж╛ ржЗржи-ржорзЗржорж░рж┐ рж╕рзНржЯрзЛрж░рзЗржЬ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржЫрж┐, ржХрж┐ржирзНрждрзБ ржПржЗ ржкрж╛ржержЯрж┐ рж░рж╛ржЦржЫрж┐
# ржпржжрж┐ ржнржмрж┐рж╖рзНржпрждрзЗ ржлрж╛ржЗрж▓ рж╕рж╛ржЗржЬ ржмржбрж╝ рж╣ржпрж╝ ржПржмржВ ржбрж┐рж╕рзНржХрзЗ рж╕рзЗржн ржХрж░рж╛рж░ ржкрзНрж░ржпрж╝рзЛржЬржи рж╣ржпрж╝ред
TEMP_DIR_PATH = TEMP_ROOT_DIR / "temp_finder_uploads"

# ржлрж╛ржЗрж▓ржЯрж┐ ржЖржкрж▓рзЛржб ржХрж░рж╛рж░ ржкрж░ ржХрждржХрзНрж╖ржг рж░рж╛ржЦрж╛ рж╣ржмрзЗ (ржШржгрзНржЯрж╛)
FILE_CLEANUP_HOURS = 1┬а

# ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рж╛ рж╣рж▓рзЛ ржпрзЗ ржЕржи-ржбрж┐рж╕рзНржХ ржбрж┐рж░рзЗржХрзНржЯрж░рж┐ рждрзИрж░рж┐ ржЖржЫрзЗ
try:
┬а ┬а TEMP_DIR_PATH.mkdir(parents=True, exist_ok=True)
except Exception as e:
┬а ┬а # рж▓ржЧрж┐ржВ ржмрж╛ ржПрж░рж░ рж╣рзНржпрж╛ржирзНржбрж▓рж┐ржВ ржпрзЛржЧ ржХрж░рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗ
┬а ┬а print(f"Error ensuring TEMP_DIR_PATH exists: {e}")